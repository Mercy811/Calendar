<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>xytCalendar</title>
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <!-- TO DO: change it to current date -->
    <p id="selected-month">
    </p>
    <p>
        <button id="previous-month-btn">
            < </button>
                <button id="current-month-btn">Today</button>
                <button id="next-month-btn"> > </button>
    </p>
    <p>
    <table id="calendar-content-table">
        <tr>
            <th class="calendar-content-table-cell-header">Sun</th>
            <th class="calendar-content-table-cell-header">Mon</th>
            <th class="calendar-content-table-cell-header">Tue</th>
            <th class="calendar-content-table-cell-header">Wed</th>
            <th class="calendar-content-table-cell-header">Thu</th>
            <th class="calendar-content-table-cell-header">Fri</th>
            <th class="calendar-content-table-cell-header">Sat</th>
        </tr>
    </table>
    </p>



    <script src="http://classes.engineering.wustl.edu/cse330/content/calendar.min.js"></script>
    <script>

        // class yxyMonth extends Month{
        //     setYear(year){
        //         this.year -= 1;
        //     }
        //     setMonth(month){
        //         this.month -= 1;
        //     }
        // }


        function loadCalendar(monthObject) {
            let weeks = monthObject.getWeeks();

            for (let w in weeks) {
                let days = weeks[w].getDates();
                let newTr = document.createElement("tr");

                for (let d in days) {
                    let newTd = newTr.appendChild(document.createElement("td"));
                    newTd.className = "calendar-content-table-cell";
                    newTd.appendChild(document.createTextNode(days[d].getDate()));
                }

                document.getElementById("calendar-content-table").appendChild(newTr);
            }
        }

        function clearCalendar() {
            let cells = document.getElementsByClassName("calendar-content-table-cell");
            while (cells.length > 0) {
                cells[0].parentNode.removeChild(cells[0]);
            }
        }

        function getMonthName(monthObject) {
            let month = new Array();
            month[0] = "January";
            month[1] = "February";
            month[2] = "March";
            month[3] = "April";
            month[4] = "May";
            month[5] = "June";
            month[6] = "July";
            month[7] = "August";
            month[8] = "September";
            month[9] = "October";
            month[10] = "November";
            month[11] = "December";
            return month[monthObject.month]
        }


        // calendar initial
        // display the current month calendar
        let today = new Date();
        let todayMonth = new Month(today.getFullYear(), today.getMonth());
        let currentMonth = todayMonth;
        loadCalendar(currentMonth);

        document.getElementById("previous-month-btn").addEventListener("click", function (event) {
            currentMonth = currentMonth.prevMonth();
            clearCalendar();
            loadCalendar(currentMonth);
            document.getElementById("selected-month").innerHTML = getMonthName(currentMonth);
        }, false);

        document.getElementById("current-month-btn").addEventListener("click", function (event) {
            currentMonth = todayMonth;
            clearCalendar();
            loadCalendar(currentMonth);
            document.getElementById("selected-month").innerHTML = getMonthName(currentMonth);
        }, false);

        document.getElementById("next-month-btn").addEventListener("click", function (event) {
            currentMonth = currentMonth.nextMonth();
            clearCalendar();
            loadCalendar(currentMonth);
            document.getElementById("selected-month").innerHTML = getMonthName(currentMonth);
        }, false);



        document.getElementById("selected-month").innerHTML = getMonthName(currentMonth);


    </script>

</body>

</html>